# Claude 协作指南与仓库规范

## 1. 语言与沟通
- 默认使用中文回复。
- 回答需引用具体文件或章节，确保可追溯。
- 不清楚的需求必须向人类确认，不得臆测实现。

## 2. 代码风格
- Python 使用 `black` 风格（4 空格缩进，行宽 88）。
- 类型标注必须完整，函数和类需包含 docstring。
- 禁止在导入语句外层包裹 `try/except`。
- 模块内按 `标准库 -> 第三方 -> 本地` 顺序导入。
- 日志使用 `structlog` 或 Python `logging`，禁止 `print` 作为长期方案。

## 3. 设计约束
- 优先复用 AutoGen 提供的组件和模式，避免重复造轮子。
- 所有消息类型使用 `dataclass` 定义，并放在独立的 `protocols` 模块。
- 智能体需拆分为文件夹结构：`agents/<Role>/handlers.py` 等，保持单一职责。
- 配置项集中在 `config/`，支持环境变量覆盖。
- 对外接口需封装在 `services/`，并配有单元测试。

## 4. 测试与验证
- 新增功能必须包含测试：单元测试、集成测试或模拟测试。
- 提交前运行静态检查（如 `ruff`, `mypy`），并在 PR 中写明测试命令。
- 对多智能体交互编写脚本化示例，确保可重现。

## 5. 文档要求
- 所有设计决策、协议变更需记录在 `docs/` 目录。
- 文档使用标题层级、编号、表格，便于 LLM 理解。
- 更新文档时同步刷新目录或关键索引，保持一致性。

## 6. 核心理念
1. 以暗猜接口为耻，以认真查阅为荣。
2. 以模糊执行为耻，以寻求确认为荣。
3. 以盲想业务为耻，以人类确认为荣。
4. 以创造接口为耻，以复用现有为荣。
5. 以跳过验证为耻，以主动测试为荣。
6. 以破坏架构为耻，以遵循规范为荣。
7. 以假装理解为耻，以诚实无知为菜。
8. 以盲目修改为耻，以谨慎重构为荣。

## 7. 提交流程
- 提交前确认 `.env`、缓存文件未纳入版本控制。
- PR 描述需包含：目的、主要改动、测试结果、潜在风险。
- 审查意见必须落实，若有争议需记录讨论结论。

